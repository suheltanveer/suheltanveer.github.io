!function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e){e.exports=JSON.parse('{"products":[{"id":1,"name":"Earphones","price":12690,"imageUrl":"https://via.placeholder.com/150","desc":"Silver"},{"id":2,"tagline":"200 Cash back","name":"Test 6X","price":14000,"imageUrl":"https://via.placeholder.com/150","desc":"32GB Gold \\n\\n Extended Warranty","planLink":"http://pointstonothing.com/linktoplan","gift":{"name":"Glory Selfie Stick","desc":"Silver Moon","price":175}},{"id":3,"name":"Test 6X","price":18000,"imageUrl":"https://via.placeholder.com/150","desc":"64GB Gold \\n\\n Extended Warranty","planLink":"http://pointstonothing.com/linktoplan","gift":{"name":"Glory Selfie Stick","desc":"Silver Moon","price":175}},{"id":4,"tagline":"100 Cash back","name":"Earphones","price":11690,"imageUrl":"https://via.placeholder.com/150","desc":"White"},{"id":5,"name":"Earphones","price":11690,"imageUrl":"https://via.placeholder.com/150","desc":"Orange"},{"id":6,"name":"Test 5X","price":10000,"imageUrl":"https://via.placeholder.com/150","desc":"32GB Gold"}],"pincode":{"560066":{"deliveryPrice":50,"cashOnDelivery":false,"estimatedDays":{"min":2,"max":5}},"560067":{"deliveryPrice":0,"cashOnDelivery":true,"estimatedDays":{"min":3,"max":5}},"560068":{"deliveryPrice":0,"cashOnDelivery":false,"estimatedDays":{"min":5,"max":5}}},"discount":{"minTotal":5000,"discountPercentage":10}}')},function(e,t,n){e.exports=n.p+"images/cb88c1d4d050e9b52155b5f7c9b89c45.png"},function(e,t,n){e.exports=n.p+"images/ccbf4005b49b4dcef5431cc357207b1e.png"},function(e,t,n){e.exports=n.p+"images/c97857b37306783a0b64a48e5be38238.png"},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(4),n(5);var a=n(0);function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,c;return t=e,c=[{key:"getProducts",value:function(){var e,t=localStorage.getItem("products");return null!==localStorage.getItem("products")?e=JSON.parse(t):((e=a.products).forEach(function(e){e.selectedQuantity=0}),localStorage.setItem("products",JSON.stringify(e))),e}},{key:"getProductPrice",value:function(t){var n,a=e.getProducts();return a.find(function(e,i){if(e.id==t)return n=a[i].price,!0}),n}},{key:"getProductQuantity",value:function(t){var n,a=e.getProducts();return a.find(function(e,i){if(e.id==t)return n=a[i].selectedQuantity,!0}),n}},{key:"deleteProduct",value:function(t){var n=e.getProducts();localStorage.setItem("products",JSON.stringify(n.filter(function(e){return e.id!=t})))}},{key:"getPincodes",value:function(){return a.pincode}},{key:"getPincode",value:function(){return JSON.parse(localStorage.getItem("pincode"))}},{key:"updatePincode",value:function(e){localStorage.setItem("pincode",JSON.stringify(e))}},{key:"resetPincode",value:function(){localStorage.setItem("pincode",JSON.stringify(""))}},{key:"getDiscount",value:function(){return a.discount}},{key:"updateStore",value:function(t,n){var a=e.getProducts();a.find(function(e,i){if(e.id==t)return a[i].selectedQuantity=n,!0}),localStorage.setItem("products",JSON.stringify(a))}}],(n=null)&&i(t.prototype,n),c&&i(t,c),e}();function r(e){return e.matches?"mobile":"tablet"}function l(e){var t=document.createElement("div");return t.innerHTML=e,t}var o=window.matchMedia("(max-width: 767px)"),s=n(1),d=n.n(s),u=n(2),p=n.n(u),v=n(3),m=n.n(v);function f(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"init",value:function(){var t;function n(t){t.matches?e.displayProducts("mobile"):e.displayProducts("tablet")}t=document.querySelectorAll("a[href='#']"),Array.from(t).forEach(function(e){e.addEventListener("click",function(e){console.log("%cAnchor links disabled","color: purple"),e.preventDefault()})}),n(o),o.addListener(n),e.displayPincode(),e.updateOrderSummary(),c.getDiscount()||(document.querySelector(".notification").style.display="none")}},{key:"getDevice",value:function(){return r(o)}},{key:"displayProducts",value:function(e){var t=c.getProducts(),n=document.querySelector("#products-list");n.innerHTML="","mobile"===e?(console.log("<<< mobile device >>>"),t.forEach(function(e){return function(e){var t=document.getElementById("products-list"),n=document.createElement("li");n.innerHTML='\n          <ul class=\'row\'>\n              <li class="image"><div></div></li>\n              <li class="desc">\n              '.concat(e.tagline?'<span class="offer">'.concat(e.tagline,"</span>"):"",'\n              <span class="name">').concat(e.name,'</span>\n              <span class="type"><pre>').concat(e.desc,'</pre></span>\n              <div class="price-quantity">\n                  <div class="price">').concat(e.price,' $</div>\n                  <div class="quantity"></div>\n              </div>\n              </li>\n          </ul>\n          ').concat(e.gift?'\n          <div class="toggle-gift '.concat(0===e.selectedQuantity?"hide":"show",'">\n          <div class="separator"><span class="icon icon-plus"></span></div>\n          <ul class=\'row child-row\'>\n              <li class="image gift-image"><div></div></li>\n              <li class="desc">\n              <span class="offer">Gift</span>\n              <span class="name">').concat(e.gift.name,'</span>\n              <span class="type"><pre>').concat(e.gift.desc,'</pre></span>\n              <div class="price-quantity">\n                  <div class="price">').concat(e.gift.price," $</div>\n              </div>\n              </li>\n          </ul><div>"):"");var a=new Image;if("Earphones"===e.name?a.src=d.a:e.name.includes("Test")&&(a.src=p.a),n.querySelector(".image div").appendChild(a),e.gift){var i=new Image;i.src=m.a,n.querySelector(".gift-image div").appendChild(i)}var c=document.createElement("a");c.classList.add("minus"),c.innerHTML='<span class="icon icon-minus '.concat(e.selectedQuantity>0?"icon-minus-active":"",'"></span>');var r=document.createElement("a");r.innerHTML='<span class="icon icon-plus"></span>',r.classList.add("plus");var l=document.createElement("input");l.type="text",l.setAttribute("value",e.selectedQuantity),l.setAttribute("disabled","disabled"),l.dataset.productId=e.id;var o=n.querySelector(".quantity");o.appendChild(c),o.appendChild(l),o.appendChild(r),t.appendChild(n)}(e)})):(console.log("<<< tablet/desktop device >>>"),n.innerHTML='\n    <li>\n    <ul class="row-header">\n        <li class="cell-product">Product</li>\n        <li class="cell-price">Price</li>\n        <li class="cell-quantity">Quantity</li>\n        <li class="cell-subtotal">Subtotal</li>\n        <li class="cell-action"></li>\n    </ul>\n    </li>',t.forEach(function(e){return function(e){var t=document.getElementById("products-list"),n=document.createElement("li");n.innerHTML='\n          <ul class=\'row\'>\n              <li class="cell-product">\n                <div class="image">\n                    <div></div>\n                </div>\n                <div class="desc">\n                '.concat(e.tagline?'<span class="offer">'.concat(e.tagline,"</span>"):"",'\n                  <span class="name">').concat(e.name,'</span>\n                  <span class="type"><pre>').concat(e.desc,'</pre></span>\n                </div>\n              </li>\n              <li class="cell-price">\n                <div class="price">').concat(e.price,' $</div>\n              </li>\n              <li class="cell-quantity quantity"></li>\n              <li class="cell-subtotal">').concat(e.price*e.selectedQuantity,' $</li>\n              <li class="cell-action">\n                <a class="delete" data-product-id="').concat(e.id,'"><span class="icon icon-delete"></span></a>\n              </li>\n          </ul>\n          ').concat(e.gift?'\n          <div class="toggle-gift '.concat(0===e.selectedQuantity?"hide":"show",'">\n          \n          <ul class=\'row child-row\'>\n              <li class="cell-product">\n                <div class="image gift-image"><div></div></div>\n                <div class="desc">\n                    <span class="offer">Gift</span>\n                    <span class="name">').concat(e.gift.name,'</span>\n                    <span class="type"><pre>').concat(e.gift.desc,'</pre></span>\n                </div>\n              </li>\n              <li class="cell-price price">').concat(e.gift.price,' $</li>\n              <li class="cell-quantity"></li>\n              <li class="cell-subtotal"></li>\n              <li class="cell-action"></li>\n          </ul><div>'):"");var a=new Image;if("Earphones"===e.name?a.src=d.a:e.name.includes("Test")&&(a.src=p.a),n.querySelector(".image div").appendChild(a),e.gift){var i=new Image;i.src=m.a,n.querySelector(".gift-image div").appendChild(i)}var c=document.createElement("a");c.classList.add("minus"),c.innerHTML='<span class="icon icon-minus '.concat(e.selectedQuantity>0?"icon-minus-active":"",'"></span>');var r=document.createElement("a");r.innerHTML='<span class="icon icon-plus"></span>',r.classList.add("plus");var l=document.createElement("input");l.type="text",l.setAttribute("value",e.selectedQuantity),l.setAttribute("disabled","disabled"),l.dataset.productId=e.id;var o=n.querySelector(".quantity");o.appendChild(c),o.appendChild(l),o.appendChild(r),t.appendChild(n)}(e)}))}},{key:"deleteProduct",value:function(t,n){c.deleteProduct(n),t.parentNode.parentNode.parentNode.remove(),e.updateOrderSummary()}},{key:"displayPincode",value:function(){var t=c.getPincode();t&&(document.querySelector(".pincode-matcher input").value=t,e.displayDeliveryOptions())}},{key:"displayDeliveryOptions",value:function(){var e=c.getPincodes(),t=Object.keys(e),n=c.getPincode();if(t.includes(n)){var a=e[n],i=a.deliveryPrice,r=a.cashOnDelivery,o=a.estimatedDays,s=o.min,d=o.max,u=document.querySelector(".delivery-options");0===i&&u.appendChild(l("Free \n Delivery")),r&&u.appendChild(l("Cash on \n Delivery")),u.appendChild(l("Estimated delivery \n time is ".concat(s===d?"".concat(s):"".concat(s," - ").concat(d)," days")))}}},{key:"removeDeliveryOptions",value:function(){document.querySelector(".delivery-options").innerHTML=""}},{key:"resetPincode",value:function(t){var n=t.target.previousElementSibling;n.value="",n.focus(),document.querySelector(".delivery-options").innerHTML="",c.resetPincode(),e.updateOrderSummary()}},{key:"updatePincode",value:function(t){if(isNaN(t.target.value))return console.log("%cPincode must be an number","color: red"),void(t.target.value="");6===t.target.value.length?(c.updatePincode(t.target.value),e.displayDeliveryOptions()):(c.resetPincode(),e.removeDeliveryOptions()),e.updateOrderSummary()}},{key:"updateOrderSummary",value:function(){var t=c.getProducts(),n=c.getDiscount(),a=c.getPincodes(),i=c.getPincode(),r=t.reduce(function(e,t){return e+t.selectedQuantity},0);document.querySelector(".order-items").textContent=r;var l=t.reduce(function(e,t){return e+t.price*t.selectedQuantity},0);document.querySelector(".order-subtotal").textContent=l;var o=document.querySelector(".order-discount"),s=0,d=0;c.getDiscount()&&(s=n.minTotal,d=n.discountPercentage);var u=0;l>=s&&(u=l*(d/100)),o.textContent=u;var p=0,v=document.querySelector(".order-shipping"),m=i&&Object.keys(a).includes(i)&&r>0;m&&(p=a[i].deliveryPrice);v.textContent=0!==p?"".concat(p," $"):"Free";var f=l-u+p;document.querySelector(".order-total").textContent=f,e.checkoutToggle(m)}},{key:"checkoutToggle",value:function(e){var t=document.querySelector(".checkout");e?t.removeAttribute("disabled"):t.setAttribute("disabled","disabled")}},{key:"updateProductRowDisplay",value:function(e,t){var n,a="mobile"===r(o),i=parseInt(e.value),l=e.previousElementSibling.querySelector(".icon-minus");if(!a){var s=e.parentNode.nextElementSibling,d=c.getProductPrice(t);s.textContent="".concat(parseInt(d)*parseInt(i)," $")}n=a?l.parentNode.parentNode.parentNode.parentNode.parentNode.nextElementSibling:l.parentNode.parentNode.parentNode.nextElementSibling,0===i?(n&&(n.classList.remove("show"),n.classList.add("hide")),l.classList.remove("icon-minus-active")):1===i&&(n&&(n.classList.remove("hide"),n.classList.add("show")),l.classList.add("icon-minus-active"))}},{key:"updateQuantity",value:function(t,n){var a=parseInt(n.value);e.updateProductRowDisplay(n,t),c.updateStore(t,a),e.updateOrderSummary()}},{key:"updateCart",value:function(t){var n=t.target.parentElement;if(n.classList.contains("delete")){var a=n.dataset.productId;e.deleteProduct(n,a)}else{var i=n.classList.contains("minus"),c=n.classList.contains("plus");if(c||i){var r=c?n.previousElementSibling:n.nextElementSibling,l=r.dataset.productId;c?(r.value=parseInt(r.value)+1,e.updateQuantity(l,r)):i&&0!==parseInt(r.value)&&(r.value=parseInt(r.value)-1,e.updateQuantity(l,r))}}}}],(n=null)&&f(t.prototype,n),a&&f(t,a),e}();document.addEventListener("DOMContentLoaded",function(){y.init()}),document.querySelector("#products-list").addEventListener("click",y.updateCart),document.querySelector(".pincode-matcher > a").addEventListener("click",y.resetPincode),document.querySelector(".pincode-matcher > input").addEventListener("input",y.updatePincode)}]);
//# sourceMappingURL=app.bundle.js.map